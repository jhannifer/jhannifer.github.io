webpackJsonp([0xc837ddb477fc],{446:function(n,s){n.exports={data:{site:{meta:{title:"Jhannifer Oliveira | Arquiteta e Urbanista",description:"Site e portfólio da Arquiteta e Urbanista Jhannifer Oliveira",url:"https://jhannifer.com.br",author:"jhanniferoliveira"}},post:{id:"C:/Users/fxcosta/Projects/jhannifer.github.io/src/pages/blog/2017-01-20-Playing-with-Nodejs-Part1/index.md absPath of file >>> MarkdownRemark",html:'<p>Nowadays, Node.js is everywhere, from frontend, backend, IoT to embedded systems (check out the recent <a href="https://nodejs.org/static/documents/casestudies/Nodejs_2017_User_Survey_Exec_Summary.pdf">survey report</a> from the Node.js Foundation), all thanks to thousands of super useful open-source libraries. But what task can Node.js handle quickly without using any library? I looked at the Node.js documentation and the answer was this little gem, the <a href="https://nodejs.org/api/os.html#os_os_freemem">OS API</a>.</p>\n<!-- more -->\n<h3>Before we start</h3>\n<p>We do not need a web server for this example, but if you need one and also do not want to use any library. I suggest this <a href="https://blog.risingstack.com/your-first-node-js-http-server/">“You first Node.js HTTP server”</a> article. Otherwise, all you need is <code>package.json</code> and a <code>index.js</code> files.</p>\n<p>Also, I recommend using Node.js version <strong>>= 6.11.2</strong> in order to use most of the ES6 features without having to install any transpile tool such as Babel.</p>\n<hr>\n<h3>Collect operating system information</h3>\n<p>Let’s start by by importing the <code>os</code> module from the Node.js API to our <code>index.js</code>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>\n\n<span class="token keyword">const</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'os\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>I will use the following provided methods from the documentation: <code>os.arch()</code>, <code>os.platform()</code> , <code>os.hostname()</code>, <code>os.type()</code>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>\n\n<span class="token keyword">let</span> arch <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">arch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// CPU architecture </span>\n<span class="token keyword">let</span> hostname <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">hostname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Hostname</span>\n<span class="token keyword">let</span> platform <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">platform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OS platform</span>\n<span class="token keyword">let</span> type <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OS type</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`arch method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arch<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// return \'x64\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`hostname method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> \nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`platform method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>platform<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`type method: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Let’s see the result when I ran the code under the default Window shell as well as my favourite platform, <a href="https://msdn.microsoft.com/en-us/commandline/wsl/about">Window Subsystem for Linux aka WSL</a>:</p>\n<html><head></head><body><div class="text-center mb-2">\n    \n    Pic 1.1: Window\n</div></body></html>\n<html><head></head><body><div class="text-center mb-4">\n    \n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-bottom: 1.0725rem;; max-width: 632px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 14.556962025316455%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABwoAD/8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCb//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQEAAT8heaf/2gAMAwEAAgADAAAAEPPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAERUf/aAAgBAQABPxBkK9K1n//Z&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="os-result-wsl" title="" src="/static/1075101ff789626bd5533d2bbae62a9e-2ea56.jpg" srcset="/static/1075101ff789626bd5533d2bbae62a9e-6ffca.jpg 188w,\n/static/1075101ff789626bd5533d2bbae62a9e-c0ee0.jpg 375w,\n/static/1075101ff789626bd5533d2bbae62a9e-2ea56.jpg 632w" sizes="(max-width: 632px) 100vw, 632px">\n    </span>\n  </span>\n  \n    Pic 2.1: Winow Subsystem for Linux\n</div></body></html>\n<p>So it is pretty easy to get some basic information about the CPU architecture, hostname, OS type &#x26; system platform. By using the WSL, I was able to test the code in both Linux and Window environment without much overhead <strong>(thanks Microsoft &#x3C;3)</strong>.</p>\n<hr>\n<h3>Collect RAM information</h3>\n<p>Whenever RAM is mentioned, most of us only care about the total amount of RAM and how many free RAM we have left on our computers. Node.js API got you covered by giving us the <code>os.freemem()</code> and <code>os.totalmem()</code> methods so let’s put them into our <code>index.js</code>.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>\n\n<span class="token keyword">let</span> freeRam <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">freemem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Unused amount of RAM</span>\n<span class="token keyword">let</span> totalRam <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">totalmem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Total amount of RAM</span>\n<span class="token keyword">let</span> usedRam <span class="token operator">=</span> totalRam <span class="token operator">-</span> freeRam<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Simple math eh...</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`free ram: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>freeRam<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> bytes ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>freeRam <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> megabytes ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>freeRam <span class="token operator">/</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> gigabytes`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`total ram: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>totalRam<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>totalRam <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> megabytes ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>totalRam <span class="token operator">/</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> gigabytes`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`=> used Ram = totalRam - freeRam = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>usedRam<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>usedRam <span class="token operator">/</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> megabytes ~ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>usedRam <span class="token operator">/</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> gigabytes`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// Output:</span>\n<span class="token comment" spellcheck="true">// free ram: 3517329408 bytes ~ 3517 megabytes ~ 3 gigabytes</span>\n<span class="token comment" spellcheck="true">// total ram: 8429346816 ~ 8429 megabytes ~ 8 gigabytes</span>\n<span class="token comment" spellcheck="true">// => used Ram = totalRam - freeRam = 4912017408 ~ 4912 megabytes ~ 4 gigabytes</span>\n</code></pre>\n      </div>\n<p>The code is pretty straightforward:</p>\n<ol>\n<li>Get the total amount of RAM = <em>totalRam</em>.</li>\n<li>Get the unused amount of RAM = <em>freeRam</em>.</li>\n<li>Calculate the free amount of RAM by subtracting <em>freeRam</em> from <em>totalRam</em>.</li>\n<li>Convert the resulting numbers from <em>byte</em> to <em>gigabyte</em>. *</li>\n</ol>\n<p>* <em>I used 1 Gigabyte = 1,000 Megabytes = 1,000,000 Kilobytes = 1,000,000,000 Bytes so you will see the final outcome did not add up, but still close enough.</em></p>\n<hr>\n<h3>Summary</h3>\n<p>And that is it for part 1 of the series. You now know how to obtain some basic info about the underlying operating system and RAM of your computers without having to install any external library.</p>\n<p>This is my first time writing an article so many people might find my style boring and not coherent. Because of that, I would be very appreciated if you could give me some advices on what I should correct or improve (grammar, writing style, code, etc) in the comment section below. If you are still interested in this series, you can find part 2 <a href="/playing-with-nodejs-part-2">here</a>. </p>\n<p>Thank you for reading till the end :D</p>',frontmatter:{layout:"post",title:"Playing with Node.js OS API - Part 1",path:"/blog/playing-with-nodejs-part-1/",date:"2017/01/20"}}},pathContext:{path:"/blog/playing-with-nodejs-part-1/"}}}});
//# sourceMappingURL=path---blog-playing-with-nodejs-part-1-842e41d363de654b2434.js.map